{% extends '::base.html.twig' %}

{% block body -%}
    <h1>Aulas disponibles</h1>
    <form> 
   <select onchange="location.href=this.options[this.selectedIndex].value">
        <option value="#">{{seleccionado}}</option>
        {% for m in meses %}
         {% if loop.index >= mesActual %}
            {% if seleccionado != m %}
                <option value="?mes={{m}}" > {{m}}</option>
             {% endif %}
         {% endif %}   
       {% endfor %}
    </select>

    <select>
        {% for dia in mesSelect %}
            {% if ( asd == mesActual) %}
                {% if (loop.index >= diaActual) %}
                    <option value="{{dia}}">{{dia}}</option>
                {% endif %}
            {% else %}
                <option value="{{dia}}">{{dia}}</option>
            {% endif %}
        {% endfor %}
    </select>
    <select onchange="location.href=this.options[this.selectedIndex].value">
        <option value="#">Aula</option>
        {% for a in aulasMostrar %}
            <option value="?aula={{a.id}}&mes={{seleccionadoAhora}}">{{a.nombre}}</option>
        {% endfor %}
    </select>  

    <select onchange="location.href=this.options[this.selectedIndex].value">
        <option value="#">Horario</option>
        {% for h in horarios %}
            <option value="">{{h}}</option>
        {% endfor %}
    </select> 

    </form>
    {% if ( aulaSeleccionada != 0 ) %}
       <table class="records_list tabla">
            <thead>
                <tr>
                    <th>Aula/Horario</th>
                    <th>{{aulaSeleccionada}}</th>
                </tr>
            </thead>
            <tbody>
                {% for h in horarios %}
                    <tr>
                        <td>{{h}}</td>    
                        <td>Gol De Boca</td>      
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
     <table class="records_list tabla" >
            <tbody>   
                   
                    <th>Hora/Aula</th>
                   
                    {% for aula in aulasMostrar %}  
                        <th>{{aula.nombre}}</th>
                    {% endfor %}
                    {% for horario in horarios %}
                       <tr> 
                           {% set valorIndexHora = loop.index %}
                            <td>{{horario}}</td>
                            {% for aula in aulasMostrar %} 
                            {% set nombreActual = aula.nombre %}
                            <script>
                            document.getElementById("{{horario}}{{nombreActual}}").classList.remove('HorarioOcupado');
                            </script> 
                            <td id = "{{horario}}{{nombreActual}}" class="HorarioDisponible"></td>
                            {% for disponible in ArrayContenedor %}
                                {% set valor = (disponible.2-(disponible.1-1)) %}  
                                {% if ((disponible.1 == valorIndexHora) and (disponible.3 == nombreActual)) %}                            
                                        <script>
                                            document.getElementById("{{horario}}{{nombreActual}}").innerHTML = "NOPE";
                                            document.getElementById("{{horario}}{{nombreActual}}").classList.remove('HorarioDisponible');
                                            document.getElementById("{{horario}}{{nombreActual}}").classList.add('HorarioOcupado');
                                           // document.getElementById("{{horario}}{{nombreActual}}").setAttribute('rowspan','{{valor}}');
                                            // document.getElementById("{{horario}}{{nombreActual}}").removeChild(childNodes['{{valor}}']);  
                                        </script>                                            
                                {% endif %}
                                 {% if ((disponible.2 > valorIndexHora) and (disponible.1 < valorIndexHora) and (disponible.3 == nombreActual)) %}                              
                                       <script>
                                            document.getElementById("{{horario}}{{nombreActual}}").innerHTML = "NOPE";
                                            document.getElementById("{{horario}}{{nombreActual}}").classList.remove('HorarioDisponible');
                                            document.getElementById("{{horario}}{{nombreActual}}").classList.add('HorarioOcupado');
                                        </script>                                          
                                {% endif %}
                                 {% if ((disponible.2 == valorIndexHora) and (disponible.3 == nombreActual)) %}                              
                                         <script>
                                            document.getElementById("{{horario}}{{nombreActual}}").innerHTML = "NOPE";
                                            document.getElementById("{{horario}}{{nombreActual}}").classList.remove('HorarioDisponible');
                                            document.getElementById("{{horario}}{{nombreActual}}")classList.add('HorarioOcupado');
                                        </script>                                          
                                {% endif %} 
                            {% endfor %}
                           {% endfor %}
                       </tr>
                    {% endfor %}
                
            </tbody>
        </table>
        
     
    {% endif %} 
{% endblock %}
